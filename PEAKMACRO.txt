local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/main/main.lua"))()

local main = library:Load({
    title = "PEAKMACRO | V1.0",
    subtitle = "Made By @Luadev."
})

-- Tab Aim
local aimTab = main:Tab("Aim")

-- Ambil script aimbot
local aimScript
local success, error = pcall(function()
    aimScript = loadstring(game:HttpGet("https://pastefy.app/CW7tMzhk/raw"))()
end)

if not success then
    warn("Gagal load aimbot script:", error)
end

-- Section untuk Aim Settings
local aimSection = aimTab:Section("Aim Settings")

local aimEnabled = aimSection:Toggle({
    text = "Enable AimBot",
    state = false,
    callback = function(state)
        if aimScript and type(aimScript) == "function" then
            aimScript(state)
        end
    end
})

local aimPartDropdown = aimSection:Dropdown({
    text = "Aim Part",
    value = "Head",
    values = {"Head", "Body"},
    callback = function(value)
        -- Logic untuk mengganti aim part
        if aimEnabled.state then
            -- Simpan setting aim part (sesuaikan dengan script aimbot)
            getgenv().AimPart = value
        end
    end
})

local teamCheck = aimSection:Toggle({
    text = "Team Check",
    state = false,
    callback = function(state)
        -- Logic untuk team check
        getgenv().TeamCheck = state
    end
})

local wallCheck = aimSection:Toggle({
    text = "Wall Check",
    state = false,
    callback = function(state)
        -- Logic untuk wall check
        getgenv().WallCheck = state
    end
})

local fovSlider = aimSection:Slider({
    text = "FOV",
    min = 1,
    max = 360,
    value = 100,
    callback = function(value)
        getgenv().AimFOV = value
    end
})

local smoothSlider = aimSection:Slider({
    text = "Smoothness",
    min = 1,
    max = 30,
    value = 10,
    callback = function(value)
        getgenv().Smoothness = value
    end
})

-- Tab Tools
local toolsTab = main:Tab("Tools")

local combatSection = toolsTab:Section("Combat")

local spinBotToggle = combatSection:Toggle({
    text = "SpinBot",
    state = false,
    callback = function(state)
        if state then
            -- Script SpinBot
            loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))():SpinBot()
        else
            -- Matikan SpinBot
            if _G.SpinBotConnection then
                _G.SpinBotConnection:Disconnect()
                _G.SpinBotConnection = nil
            end
        end
    end
})

local triggerBotToggle = combatSection:Toggle({
    text = "Trigger Bot",
    state = false,
    callback = function(state)
        if state then
            -- Script Trigger Bot
            getgenv().TriggerBotEnabled = true
            
            local function triggerBot()
                while getgenv().TriggerBotEnabled and task.wait() do
                    local target = nil
                    local closestDistance = math.huge
                    
                    for _, player in pairs(game.Players:GetPlayers()) do
                        if player ~= game.Players.LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                            local distance = (player.Character.HumanoidRootPart.Position - game.Players.LocalPlayer.Character.HumanoidRootPart.Position).Magnitude
                            if distance < closestDistance then
                                closestDistance = distance
                                target = player
                            end
                        end
                    end
                    
                    if target and target.Character and target.Character:FindFirstChild("Humanoid") and target.Character.Humanoid.Health > 0 then
                        mouse1press()
                        task.wait(0.1)
                        mouse1release()
                    end
                end
            end
            
            task.spawn(triggerBot)
        else
            getgenv().TriggerBotEnabled = false
        end
    end
})

local movementSection = toolsTab:Section("Movement")

local speedHackToggle = movementSection:Toggle({
    text = "Speed Hack",
    state = false,
    callback = function(state)
        if state then
            local player = game.Players.LocalPlayer
            local character = player.Character or player.CharacterAdded:Wait()
            local humanoid = character:WaitForChild("Humanoid")
            
            getgenv().SpeedHack = humanoid:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
                humanoid.WalkSpeed = 50
            end)
            humanoid.WalkSpeed = 50
        else
            if getgenv().SpeedHack then
                getgenv().SpeedHack:Disconnect()
                getgenv().SpeedHack = nil
                
                local player = game.Players.LocalPlayer
                if player.Character then
                    local humanoid = player.Character:FindFirstChild("Humanoid")
                    if humanoid then
                        humanoid.WalkSpeed = 16
                    end
                end
            end
        end
    end
})

local jumpPowerToggle = movementSection:Toggle({
    text = "High Jump",
    state = false,
    callback = function(state)
        if state then
            local player = game.Players.LocalPlayer
            local character = player.Character or player.CharacterAdded:Wait()
            local humanoid = character:WaitForChild("Humanoid")
            
            getgenv().JumpHack = humanoid:GetPropertyChangedSignal("JumpPower"):Connect(function()
                humanoid.JumpPower = 100
            end)
            humanoid.JumpPower = 100
        else
            if getgenv().JumpHack then
                getgenv().JumpHack:Disconnect()
                getgenv().JumpHack = nil
                
                local player = game.Players.LocalPlayer
                if player.Character then
                    local humanoid = player.Character:FindFirstChild("Humanoid")
                    if humanoid then
                        humanoid.JumpPower = 50
                    end
                end
            end
        end
    end
})

local noclipToggle = movementSection:Toggle({
    text = "Noclip",
    state = false,
    callback = function(state)
        getgenv().Noclip = state
        
        if state then
            local player = game.Players.LocalPlayer
            local character = player.Character
            
            if character then
                for _, part in pairs(character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
            end
        end
    end
})

-- Tab Misc
local miscTab = main:Tab("Misc")

local serverSection = miscTab:Section("Server")

local rejoinButton = serverSection:Button({
    text = "Rejoin Server",
    callback = function()
        local ts = game:GetService("TeleportService")
        local player = game.Players.LocalPlayer
        
        ts:Teleport(game.PlaceId, player)
    end
})

local serverHopButton = serverSection:Button({
    text = "Server Hop",
    callback = function()
        local Http = game:GetService("HttpService")
        local TPS = game:GetService("TeleportService")
        local Api = "https://games.roblox.com/v1/games/%s/servers/Public?sortOrder=%s&limit=%s"
        
        local _place = game.PlaceId
        local _sortOrder = "Desc"
        local _limit = 100
        
        local servers = {}
        local req = request({
            Url = string.format(Api, _place, _sortOrder, _limit),
            Method = "GET"
        })
        local body = Http:JSONDecode(req.Body)
        
        for i, v in pairs(body.data) do
            if type(v) == "table" and v.id and v.id ~= game.JobId then
                table.insert(servers, v.id)
            end
        end
        
        if #servers > 0 then
            TPS:TeleportToPlaceInstance(_place, servers[math.random(1, #servers)])
        else
            warn("Tidak ada server yang ditemukan")
        end
    end
})

local antiLagToggle = serverSection:Toggle({
    text = "Anti Lag",
    state = false,
    callback = function(state)
        if state then
            -- Reduce graphics quality
            settings().Rendering.QualityLevel = 1
            
            -- Disable shadows
            game.Lighting.GlobalShadows = false
            game.Lighting.FogEnd = 100000
            
            -- Reduce particles
            for _, v in pairs(game:GetDescendants()) do
                if v:IsA("ParticleEmitter") or v:IsA("Trail") then
                    v.Enabled = false
                end
            end
        else
            -- Reset settings
            settings().Rendering.QualityLevel = 10
            game.Lighting.GlobalShadows = true
            game.Lighting.FogEnd = 1000000
            
            for _, v in pairs(game:GetDescendants()) do
                if v:IsA("ParticleEmitter") or v:IsA("Trail") then
                    v.Enabled = true
                end
            end
        end
    end
})

local playerSection = miscTab:Section("Player")

local espToggle = playerSection:Toggle({
    text = "ESP",
    state = false,
    callback = function(state)
        getgenv().ESPEnabled = state
        
        if state then
            -- Simple ESP Implementation
            for _, player in pairs(game.Players:GetPlayers()) do
                if player ~= game.Players.LocalPlayer and player.Character then
                    local highlight = Instance.new("Highlight")
                    highlight.Parent = player.Character
                    highlight.Adornee = player.Character
                    highlight.FillColor = Color3.fromRGB(255, 0, 0)
                    highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
                    highlight.FillTransparency = 0.5
                    highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                    
                    getgenv().ESPInstances = getgenv().ESPInstances or {}
                    table.insert(getgenv().ESPInstances, highlight)
                end
            end
        else
            -- Remove ESP
            if getgenv().ESPInstances then
                for _, instance in pairs(getgenv().ESPInstances) do
                    instance:Destroy()
                end
                getgenv().ESPInstances = {}
            end
        end
    end
})

local fullBrightToggle = playerSection:Toggle({
    text = "Full Bright",
    state = false,
    callback = function(state)
        if state then
            game.Lighting.Ambient = Color3.new(1, 1, 1)
            game.Lighting.Brightness = 2
            game.Lighting.GlobalShadows = false
        else
            game.Lighting.Ambient = Color3.new(0, 0, 0)
            game.Lighting.Brightness = 1
            game.Lighting.GlobalShadows = true
        end
    end
})

local utilitySection = miscTab:Section("Utility")

local fpsCounter = utilitySection:Toggle({
    text = "Show FPS",
    state = false,
    callback = function(state)
        if state then
            -- Create FPS counter
            local screenGui = Instance.new("ScreenGui")
            local textLabel = Instance.new("TextLabel")
            
            screenGui.Parent = game.CoreGui
            textLabel.Parent = screenGui
            
            textLabel.Size = UDim2.new(0, 100, 0, 30)
            textLabel.Position = UDim2.new(0, 10, 0, 10)
            textLabel.BackgroundTransparency = 0.5
            textLabel.BackgroundColor3 = Color3.new(0, 0, 0)
            textLabel.TextColor3 = Color3.new(1, 1, 1)
            textLabel.TextSize = 14
            textLabel.Text = "FPS: 60"
            
            getgenv().FPSCounter = textLabel
            
            -- Update FPS
            task.spawn(function()
                while getgenv().FPSCounter do
                    local fps = math.floor(1 / game:GetService("RunService").RenderStepped:Wait())
                    textLabel.Text = "FPS: " .. fps
                    task.wait(0.5)
                end
            end)
        else
            if getgenv().FPSCounter then
                getgenv().FPSCounter.Parent:Destroy()
                getgenv().FPSCounter = nil
            end
        end
    end
})

local pingCounter = utilitySection:Toggle({
    text = "Show Ping",
    state = false,
    callback = function(state)
        if state then
            -- Create Ping counter
            local screenGui = Instance.new("ScreenGui")
            local textLabel = Instance.new("TextLabel")
            
            screenGui.Parent = game.CoreGui
            textLabel.Parent = screenGui
            
            textLabel.Size = UDim2.new(0, 100, 0, 30)
            textLabel.Position = UDim2.new(0, 10, 0, 50)
            textLabel.BackgroundTransparency = 0.5
            textLabel.BackgroundColor3 = Color3.new(0, 0, 0)
            textLabel.TextColor3 = Color3.new(1, 1, 1)
            textLabel.TextSize = 14
            textLabel.Text = "Ping: 0ms"
            
            getgenv().PingCounter = textLabel
            
            -- Update Ping
            task.spawn(function()
                while getgenv().PingCounter do
                    local stats = game:GetService("Stats")
                    local ping = stats.Network.ServerStatsItem["Data Ping"]:GetValue()
                    textLabel.Text = "Ping: " .. math.floor(ping) .. "ms"
                    task.wait(1)
                end
            end)
        else
            if getgenv().PingCounter then
                getgenv().PingCounter.Parent:Destroy()
                getgenv().PingCounter = nil
            end
        end
    end
})

-- Auto Noclip loop
game:GetService("RunService").Stepped:Connect(function()
    if getgenv().Noclip then
        local player = game.Players.LocalPlayer
        if player and player.Character then
            for _, part in pairs(player.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end
    end
end)

-- Auto ESP for new players
game.Players.PlayerAdded:Connect(function(player)
    if getgenv().ESPEnabled then
        player.CharacterAdded:Connect(function(character)
            if getgenv().ESPEnabled then
                task.wait(1)
                local highlight = Instance.new("Highlight")
                highlight.Parent = character
                highlight.Adornee = character
                highlight.FillColor = Color3.fromRGB(255, 0, 0)
                highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
                highlight.FillTransparency = 0.5
                highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
                
                if not getgenv().ESPInstances then
                    getgenv().ESPInstances = {}
                end
                table.insert(getgenv().ESPInstances, highlight)
            end
        end)
    end
end)

warn("PEAKMACRO V1.0 Loaded Successfully!")
